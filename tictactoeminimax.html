<!-- Tictactoe with Minimax Algorithm AI Opponent (for perfect play)-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Tic Tac Toe</title>
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background: linear-gradient(135deg, #74abe2, #5563de);
        font-family: Arial, sans-serif;
        color: #fff;
      }

      .game-container {
        text-align: center;
      }

      h1 {
        margin-bottom: 20px;
      }

      .board {
        display: grid;
        grid-template-columns: repeat(3, 100px);
        grid-template-rows: repeat(3, 100px);
        gap: 5px;
      }

      .cell {
        width: 100px;
        height: 100px;
        background: rgba(255, 255, 255, 0.1);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2.5rem;
        font-weight: bold;
        border-radius: 10px;
        cursor: pointer;
        transition: background 0.3s;
      }

      .cell:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .status {
        margin-top: 20px;
        font-size: 1.2rem;
      }

      button {
        margin-top: 15px;
        padding: 10px 20px;
        font-size: 1rem;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background: #fff;
        color: #5563de;
        font-weight: bold;
        transition: 0.3s;
      }

      button:hover {
        background: #eee;
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <h1>Tic Tac Toe</h1>
      <div class="board" id="board"></div>
      <div class="status" id="status">Your turn (X)</div>
      <button onclick="resetGame()">Restart Game</button>
    </div>

    <script>
      let board = [
        [null, null, null],
        [null, null, null],
        [null, null, null],
      ];
      let human = "X";
      let ai = "O";
      let gameOver = false;

      const boardElement = document.getElementById("board");
      const statusElement = document.getElementById("status");

      // Draw the board
      function createBoard() {
        boardElement.innerHTML = "";
        for (let row = 0; row < 3; row++) {
          for (let col = 0; col < 3; col++) {
            const cell = document.createElement("div");
            cell.classList.add("cell");
            cell.dataset.row = row;
            cell.dataset.col = col;
            cell.textContent = board[row][col] || "";
            cell.addEventListener("click", () => humanMove(row, col));
            boardElement.appendChild(cell);
          }
        }
      }

      // Check winner
      function checkWinner(player) {
        for (let i = 0; i < 3; i++) {
          if (
            board[i][0] === player &&
            board[i][1] === player &&
            board[i][2] === player
          )
            return true;

          if (
            board[0][i] === player &&
            board[1][i] === player &&
            board[2][i] === player
          )
            return true;
        }

        if (
          board[0][0] === player &&
          board[1][1] === player &&
          board[2][2] === player
        )
          return true;

        if (
          board[0][2] === player &&
          board[1][1] === player &&
          board[2][0] === player
        )
          return true;

        return false;
      }

      function boardIsFull() {
        for (let row = 0; row < 3; row++)
          for (let col = 0; col < 3; col++)
            if (board[row][col] === null) return false;
        return true;
      }

      // Human move
      function humanMove(row, col) {
        if (gameOver || board[row][col] !== null) return;

        board[row][col] = human;
        createBoard();

        if (checkWinner(human)) {
          statusElement.textContent = "You win! ðŸŽ‰";
          gameOver = true;
          return;
        }

        if (boardIsFull()) {
          statusElement.textContent = "It's a draw!";
          gameOver = true;
          return;
        }

        statusElement.textContent = "AI's turn...";
        setTimeout(aiMove, 500);
      }

      // AI move using Minimax
      function aiMove() {
        if (gameOver) return;

        let bestScore = -Infinity;
        let move;
        for (let row = 0; row < 3; row++) {
          for (let col = 0; col < 3; col++) {
            if (board[row][col] === null) {
              board[row][col] = ai;
              let score = minimax(board, 0, false);
              board[row][col] = null;
              if (score > bestScore) {
                bestScore = score;
                move = { row, col };
              }
            }
          }
        }

        if (move) {
          board[move.row][move.col] = ai;
          createBoard();

          if (checkWinner(ai)) {
            statusElement.textContent = "AI wins! ðŸ¤–";
            gameOver = true;
            return;
          }

          if (boardIsFull()) {
            statusElement.textContent = "It's a draw!";
            gameOver = true;
            return;
          }

          statusElement.textContent = "Your turn (X)";
        }
      }

      // Minimax algorithm
      function minimax(boardState, depth, isMaximizing) {
        if (checkWinner(ai)) return 10 - depth;
        if (checkWinner(human)) return depth - 10;
        if (boardIsFull()) return 0;

        if (isMaximizing) {
          let bestScore = -Infinity;
          for (let row = 0; row < 3; row++) {
            for (let col = 0; col < 3; col++) {
              if (boardState[row][col] === null) {
                boardState[row][col] = ai;
                let score = minimax(boardState, depth + 1, false);
                boardState[row][col] = null;
                bestScore = Math.max(score, bestScore);
              }
            }
          }
          return bestScore;
        } else {
          let bestScore = Infinity;
          for (let row = 0; row < 3; row++) {
            for (let col = 0; col < 3; col++) {
              if (boardState[row][col] === null) {
                boardState[row][col] = human;
                let score = minimax(boardState, depth + 1, true);
                boardState[row][col] = null;
                bestScore = Math.min(score, bestScore);
              }
            }
          }
          return bestScore;
        }
      }

      // Reset game
      function resetGame() {
        board = [
          [null, null, null],
          [null, null, null],
          [null, null, null],
        ];
        gameOver = false;
        statusElement.textContent = "Your turn (X)";
        createBoard();
      }

      // Initialize
      createBoard();
    </script>
  </body>
</html>
